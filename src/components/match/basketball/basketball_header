<template>
    <header class="header inte-header-b" v-if="match">
        <div class="info">
            <a class="back-icon" onClick="history.back()">返回</a>
            <div class="info-c">
                <div class="info-pic">
                    <img :src="match.matchlogo">
                </div>
                <div class="info-itm">
                    <h1>{{match.simplegbname}}</h1>
                </div>
            </div>
        </div>
        <nav class="sk-tab">
            <span class="match-tab-itm" :class="{cur:~$route.path.indexOf('/schedule')}">
                <router-link :to="{name:'center-basketball-match-schedule,params:{seasonid:list.seasonid}}" replace>赛程</router-link>
            </span>
            <span class="match-tab-itm" :class="{cur:~$route.path.indexOf('/rank')}">
                <router-link :to="{name:'center-basketball-match-rank,params:{seasonid:list.seasonid}}" replace>排名</router-link>
            </span>
            <span class="match-tab-itm" :class="{cur:~$route.path.indexOf('/statistics')}">
                <router-link :to="{name:'center-basketball-match-statistics,params:{seasonid:list.seasonid}}" replace>统计</router-link>
            </span>
        </nav>
    </header>
</template>

<script>
    import {aTypes} from '~store/center'
    export default{
        async asyncData ({store, route: {params}}) {
            await store.dispatch(aTypes.getBasketHead,{seasonid:params.seasonid})
        },
        computed: {
            match () {
                return this.$store.state.center.basketballMatch.head
            }
        },
        methods:{
            async fetchData(){
                let match = this.$store.state.center.basketballMatch.head
                if (!match) {
                    await this.$store.dispatch(aTypes.getBasketHead,{seasonid:this.$route.params.seasonid})
                }
            }
        },
        mounted(){
            this.fetchData()
        }
    }
</script>
